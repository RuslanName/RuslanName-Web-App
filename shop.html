<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Магазин</title>
    <style>
        body {
            background-color: var(--tg-theme-bg-color);
        }
    </style>
</head>
<body>
    <div id="shop">
        <div class="product-grid">
            <div class="product" id="product1">
                <h3>Товар 1</h3>
                <img src="https://cdn-icons-png.flaticon.com/512/3595/3595455.png" alt="Product 1">
                <p><span id="price1">1000</span> руб.</p>
                <p id="quantity1">В наличии: 10</p>
                <button id="add1" onclick="addToCart('1')">Добавить</button>
                <div id="cart-controls1" class="cart-controls" style="display:none;">
                    <button onclick="updateCart('1', -1)">-</button>
                    <span id="cart-quantity1">0</span>
                    <button onclick="updateCart('1', 1)">+</button>
                </div>
            </div>

            <div class="product" id="product2">
                <h3>Товар 2</h3>
                <img src="https://cdn-icons-png.flaticon.com/512/3595/3595455.png" alt="Product 2">
                <p><span id="price2">1500</span> руб.</p>
                <p id="quantity2">В наличии: 5</p>
                <button id="add2" onclick="addToCart('2')">Добавить</button>
                <div id="cart-controls2" class="cart-controls" style="display:none;">
                    <button onclick="updateCart('2', -1)">-</button>
                    <span id="cart-quantity2">0</span>
                    <button onclick="updateCart('2', 1)">+</button>
                </div>
            </div>

            <div class="product" id="product3">
                <h3>Товар 3</h3>
                <img src="https://cdn-icons-png.flaticon.com/512/3595/3595455.png" alt="Product 3">
                <p><span id="price3">2000</span> руб.</p>
                <p id="quantity3">В наличии: 8</p>
                <button id="add3" onclick="addToCart('3')">Добавить</button>
                <div id="cart-controls3" class="cart-controls" style="display:none;">
                    <button onclick="updateCart('3', -1)">-</button>
                    <span id="cart-quantity3">0</span>
                    <button onclick="updateCart('3', 1)">+</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <button onclick="location.href='cart.html'">Корзина</button>
        <button onclick="location.href='orders.html'">Заказы</button>
    </footer>

    <script>
        // Функция добавления товара в корзину
        function addToCart(productId) {
            const addButton = document.getElementById(`add${productId}`);
            const cartControls = document.getElementById(`cart-controls${productId}`);
            const cartQuantity = document.getElementById(`cart-quantity${productId}`);
            const quantity = document.getElementById(`quantity${productId}`);
            const availableQuantity = +quantity.innerText.split(': ')[1];

            if (availableQuantity > 0) {
                addButton.style.display = 'none';
                cartControls.style.display = 'flex';
                cartQuantity.innerText = 1;
            }
        }

        // Функция обновления количества товаров в корзине
        function updateCart(productId, delta) {
            const cartQuantity = document.getElementById(`cart-quantity${productId}`);
            const quantity = document.getElementById(`quantity${productId}`);
            const currentQuantity = +cartQuantity.innerText;
            const availableQuantity = +quantity.innerText.split(': ')[1];
            const newQuantity = currentQuantity + delta;

            if (newQuantity <= 0) {
                document.getElementById(`add${productId}`).style.display = 'block';
                document.getElementById(`cart-controls${productId}`).style.display = 'none';
            } else if (newQuantity <= availableQuantity) {
                cartQuantity.innerText = newQuantity;
            }
        }
    </script>
</body>
</html>
